import{a as Pe,b as we,c as h,d as X,e as qe,f as Ge,g as Xe,h as Z,i as Ze,j as et,k as ee}from"./chunk-25XCUBXP.mjs";var ne=Pe((tt,te)=>{h();var D;typeof window<"u"||typeof window<"u"?D=window:typeof self<"u"?D=self:D={};te.exports=D});h();h();var me=we(ne());import L,{useCallback as Je}from"react";h();import{useRef as Te,useState as Me,useLayoutEffect as $e,createElement as pe,forwardRef as Ae,useCallback as Be,useMemo as Dt}from"react";h();h();function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},b.apply(this,arguments)}var N;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(N||(N={}));var ae=function(e){return e};var re="beforeunload";var Ee="popstate";function se(e){e===void 0&&(e={});var t=e,n=t.window,a=n===void 0?document.defaultView:n,r=a.history;function o(){var i=a.location,c=i.pathname,f=i.search,y=i.hash,m=r.state||{};return[m.idx,ae({pathname:c,search:f,hash:y,state:m.usr||null,key:m.key||"default"})]}var s=null;function l(){if(s)p.call(s),s=null;else{var i=N.Pop,c=o(),f=c[0],y=c[1];if(p.length){if(f!=null){var m=v-f;m&&(s={action:i,location:y,retry:function(){k(m*-1)}},k(m))}}else j(i)}}a.addEventListener(Ee,l);var u=N.Pop,d=o(),v=d[0],g=d[1],R=ie(),p=ie();v==null&&(v=0,r.replaceState(b({},r.state,{idx:v}),""));function S(i){return typeof i=="string"?i:$(i)}function _(i,c){return c===void 0&&(c=null),ae(b({pathname:g.pathname,hash:"",search:""},typeof i=="string"?x(i):i,{state:c,key:be()}))}function z(i,c){return[{usr:i.state,key:i.key,idx:c},S(i)]}function Q(i,c,f){return!p.length||(p.call({action:i,location:c,retry:f}),!1)}function j(i){u=i;var c=o();v=c[0],g=c[1],R.call({action:u,location:g})}function q(i,c){var f=N.Push,y=_(i,c);function m(){q(i,c)}if(Q(f,y,m)){var E=z(y,v+1),I=E[0],M=E[1];try{r.pushState(I,"",M)}catch{a.location.assign(M)}j(f)}}function G(i,c){var f=N.Replace,y=_(i,c);function m(){G(i,c)}if(Q(f,y,m)){var E=z(y,v),I=E[0],M=E[1];r.replaceState(I,"",M),j(f)}}function k(i){r.go(i)}var Re={get action(){return u},get location(){return g},createHref:S,push:q,replace:G,go:k,back:function(){k(-1)},forward:function(){k(1)},listen:function(c){return R.push(c)},block:function(c){var f=p.push(c);return p.length===1&&a.addEventListener(re,oe),function(){f(),p.length||a.removeEventListener(re,oe)}}};return Re}function oe(e){e.preventDefault(),e.returnValue=""}function ie(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(a){return a!==n})}},call:function(n){e.forEach(function(a){return a&&a(n)})}}}function be(){return Math.random().toString(36).substr(2,8)}function $(e){var t=e.pathname,n=t===void 0?"/":t,a=e.search,r=a===void 0?"":a,o=e.hash,s=o===void 0?"":o;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(n+=s.charAt(0)==="#"?s:"#"+s),n}function x(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}h();import{createContext as F,useRef as xe,useState as st,useLayoutEffect as lt,createElement as le,useContext as O,useEffect as Oe,useMemo as U,useCallback as Le,Children as ct,isValidElement as ut,Fragment as ht}from"react";function A(e,t){if(!e)throw new Error(t)}var B=F(null),H=F(null),J=F({outlet:null,matches:[]});function V(e){let{basename:t="/",children:n=null,location:a,navigationType:r=N.Pop,navigator:o,static:s=!1}=e;C()&&A(!1);let l=De(t),u=U(()=>({basename:l,navigator:o,static:s}),[l,o,s]);typeof a=="string"&&(a=x(a));let{pathname:d="/",search:v="",hash:g="",state:R=null,key:p="default"}=a,S=U(()=>{let _=ke(d,l);return _==null?null:{pathname:_,search:v,hash:g,state:R,key:p}},[l,d,v,g,R,p]);return S==null?null:le(B.Provider,{value:u},le(H.Provider,{children:n,value:{location:S,navigationType:r}}))}function Y(e){C()||A(!1);let{basename:t,navigator:n}=O(B),{hash:a,pathname:r,search:o}=W(e),s=r;if(t!=="/"){let l=_e(e),u=l!=null&&l.endsWith("/");s=r==="/"?t+(u?"/":""):he([t,r])}return n.createHref({pathname:s,search:o,hash:a})}function C(){return O(H)!=null}function w(){return C()||A(!1),O(H).location}function T(){C()||A(!1);let{basename:e,navigator:t}=O(B),{matches:n}=O(J),{pathname:a}=w(),r=JSON.stringify(n.map(l=>l.pathnameBase)),o=xe(!1);return Oe(()=>{o.current=!0}),Le(function(l,u){if(u===void 0&&(u={}),!o.current)return;if(typeof l=="number"){t.go(l);return}let d=ue(l,JSON.parse(r),a);e!=="/"&&(d.pathname=he([e,d.pathname])),(u.replace?t.replace:t.push)(d,u.state)},[e,t,r,a])}function W(e){let{matches:t}=O(J),{pathname:n}=w(),a=JSON.stringify(t.map(r=>r.pathnameBase));return U(()=>ue(e,JSON.parse(a),n),[e,a,n])}function ce(e,t){t===void 0&&(t="/");let{pathname:n,search:a="",hash:r=""}=typeof e=="string"?x(e):e;return{pathname:n?n.startsWith("/")?n:Se(n,t):t,search:Ve(a),hash:Ce(r)}}function Se(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function ue(e,t,n){let a=typeof e=="string"?x(e):e,r=e===""||a.pathname===""?"/":a.pathname,o;if(r==null)o=n;else{let l=t.length-1;if(r.startsWith("..")){let u=r.split("/");for(;u[0]==="..";)u.shift(),l-=1;a.pathname=u.join("/")}o=l>=0?t[l]:"/"}let s=ce(a,o);return r&&r!=="/"&&r.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function _e(e){return e===""||e.pathname===""?"/":typeof e=="string"?x(e).pathname:e.pathname}function ke(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=e.charAt(t.length);return n&&n!=="/"?null:e.slice(t.length)||"/"}var he=e=>e.join("/").replace(/\/\/+/g,"/"),De=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ve=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ce=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function K(){return K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},K.apply(this,arguments)}function He(e,t){if(e==null)return{};var n={},a=Object.keys(e),r,o;for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}var We=["onClick","reloadDocument","replace","state","target","to"];function fe(e){let{basename:t,children:n,window:a}=e,r=Te();r.current==null&&(r.current=se({window:a}));let o=r.current,[s,l]=Me({action:o.action,location:o.location});return $e(()=>o.listen(l),[o]),pe(V,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:o})}function je(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var de=Ae(function(t,n){let{onClick:a,reloadDocument:r,replace:o=!1,state:s,target:l,to:u}=t,d=He(t,We),v=Y(u),g=Ie(u,{replace:o,state:s,target:l});function R(p){a&&a(p),!p.defaultPrevented&&!r&&g(p)}return pe("a",K({},d,{href:v,onClick:R,ref:n,target:l}))});function Ie(e,t){let{target:n,replace:a,state:r}=t===void 0?{}:t,o=T(),s=w(),l=W(e);return Be(u=>{if(u.button===0&&(!n||n==="_self")&&!je(u)){u.preventDefault();let d=!!a||$(s)===$(l);o(e,{replace:d,state:r})}},[s,o,l,a,r,n,e])}h();import Fe from"react";var ve=({hidden:e,children:t})=>Fe.createElement("div",{hidden:e},t);var{document:ge}=me.default,Ye=()=>`${ge.location.pathname}?`,Ut=()=>{let e=T();return Je((t,{plain:n,...a}={})=>{if(typeof t=="string"&&t.startsWith("#")){ge.location.hash=t;return}if(typeof t=="string"){let r=n?t:`?path=${t}`;return e(r,a)}if(typeof t=="number")return e(t)},[])},Ke=({to:e,children:t,...n})=>L.createElement(de,{to:`${Ye()}path=${e}`,...n},t);Ke.displayName="QueryLink";var ye=({children:e})=>{let t=w(),{path:n,singleStory:a}=Z(t.search),{viewMode:r,storyId:o,refId:s}=X(n);return L.createElement(L.Fragment,null,e({path:n,location:t,viewMode:r,storyId:o,refId:s,singleStory:a==="true"}))};ye.displayName="QueryLocation";var Ne=({children:e,path:t,startsWith:n=!1})=>L.createElement(ye,null,({path:a,...r})=>e({match:ee(a,t,n),...r}));Ne.displayName="QueryMatch";var ze=({path:e,children:t,startsWith:n=!1,hideOnly:a=!1})=>L.createElement(Ne,{path:e,startsWith:n},({match:r})=>a?L.createElement(ve,{hidden:!r},t):r?t:null);ze.displayName="Route";var Ft=(...e)=>fe(...e),Jt=(...e)=>V(...e);export{Jt as BaseLocationProvider,qe as DEEPLY_EQUAL,Ke as Link,ye as Location,Ft as LocationProvider,Ne as Match,ze as Route,Xe as buildArgsParam,Ge as deepDiff,ee as getMatch,X as parsePath,Ze as queryFromLocation,Z as queryFromString,et as stringifyQuery,Ut as useNavigate};
