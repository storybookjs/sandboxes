import{a as m,b as h,g as b}from"./chunk-XCPI62K2.mjs";import{c as y}from"./chunk-2WFWQRVE.mjs";import*as T from"react";import{addons as L,types as Q}from"@storybook/addons";import i,{Fragment as B,useEffect as u,useRef as O,memo as z}from"react";import v from"memoizerific";import{styled as w,Global as D,withTheme as M}from"@storybook/theming";import{Icons as V,IconButton as S,WithTooltip as P,TooltipLinkList as W}from"@storybook/components";import{useStorybookApi as j,useParameter as N,useAddonState as $}from"@storybook/api";var F=v(50)(t=>[...R,...Object.entries(t).map(([e,{name:o,...l}])=>({...l,id:e,title:o}))]),a={id:"reset",title:"Reset viewport",styles:null,type:"other"},R=[a],_=v(50)((t,e,o,l,n)=>t.map(r=>{switch(r.id){case a.id:if(e.id===r.id)return null;default:return{...r,onClick:()=>{o({...l,selected:r.id}),n()}}}}).filter(Boolean)),E="storybook-preview-iframe",q="storybook-preview-wrapper",G=({width:t,height:e,...o})=>({...o,height:t,width:e}),H=w.div(()=>({display:"inline-flex"})),k=w.div(({theme:t})=>({display:"inline-block",textDecoration:"none",padding:10,fontWeight:t.typography.weight.bold,fontSize:t.typography.size.s2-1,lineHeight:"1",height:40,border:"none",borderTop:"3px solid transparent",borderBottom:"3px solid transparent",background:"transparent"})),K=w(S)(()=>({display:"inline-flex",alignItems:"center"})),Y=w.div(({theme:t})=>({fontSize:t.typography.size.s2-1,marginLeft:10})),J=(t,e,o)=>{if(e===null)return null;let l=typeof e=="function"?e(t):e;return o?G(l):l},I=z(M(({theme:t})=>{let{viewports:e=y,defaultViewport:o=a.id,disable:l}=N(h,{}),[n,r]=$(m,{selected:o,isRotated:!1}),d=F(e),A=j();d.find(s=>s.id===o)||console.warn(`Cannot find "defaultViewport" of "${o}" in addon-viewport configs, please check the "viewports" setting in the configuration.`),u(()=>{b(A,r,Object.keys(e))},[e]),u(()=>{r({selected:o||(e[n.selected]?n.selected:a.id),isRotated:n.isRotated})},[o]);let{selected:x,isRotated:f}=n,c=d.find(s=>s.id===x)||d.find(s=>s.id===o)||d.find(s=>s.default)||a,g=O(),p=J(g.current,c.styles,f);return u(()=>{g.current=p},[c]),l||Object.entries(e).length===0?null:i.createElement(B,null,i.createElement(P,{placement:"top",trigger:"click",tooltip:({onHide:s})=>i.createElement(W,{links:_(d,c,r,n,s)}),closeOnClick:!0},i.createElement(K,{key:"viewport",title:"Change the size of the preview",active:!!p,onDoubleClick:()=>{r({...n,selected:a.id})}},i.createElement(V,{icon:"grow"}),p?i.createElement(Y,null,f?`${c.title} (L)`:`${c.title} (P)`):null)),p?i.createElement(H,null,i.createElement(D,{styles:{[`#${E}`]:{margin:"auto",transition:"width .3s, height .3s",position:"relative",border:"1px solid black",boxShadow:"0 0 100px 100vw rgba(0,0,0,0.5)",...p},[`#${q}`]:{padding:t.layoutMargin,alignContent:"center",alignItems:"center",justifyContent:"center",justifyItems:"center",overflow:"auto",display:"grid",gridTemplateColumns:"100%",gridTemplateRows:"100%"}}}),i.createElement(k,{title:"Viewport width"},p.width.replace("px","")),i.createElement(S,{key:"viewport-rotate",title:"Rotate viewport",onClick:()=>{r({...n,isRotated:!f})}},i.createElement(V,{icon:"transfer"})),i.createElement(k,{title:"Viewport height"},p.height.replace("px",""))):null)}));L.register(m,()=>{L.add(m,{title:"viewport / media-queries",type:Q.TOOL,match:({viewMode:t})=>t==="story",render:()=>T.createElement(I,null)})});
