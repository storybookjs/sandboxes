import{addons as _t,types as pe}from"@storybook/addons";var Y="storybook/interactions",lt=`${Y}/panel`;import ot from"global";import*as i from"react";import{useChannel as ee,useParameter as ne}from"@storybook/api";import{FORCE_REMOUNT as re,IGNORED_EXCEPTION as se,STORY_RENDER_PHASE_CHANGED as ae,STORY_THREW_EXCEPTION as le,PLAY_FUNCTION_THREW_EXCEPTION as ie}from"@storybook/core-events";import{EVENTS as v,CallStates as L}from"@storybook/instrumenter";import*as b from"react";import{AddonPanel as Go,Link as Vo,Placeholder as Jo}from"@storybook/components";import{CallStates as tt}from"@storybook/instrumenter";import{styled as B}from"@storybook/theming";import{transparentize as Xo}from"polished";import c from"react";import{Button as Dt,IconButton as Mt,Icons as $,Separator as Ft,P as Lt,TooltipNote as jt,WithTooltip as D,Bar as Wt}from"@storybook/components";import{CallStates as zt}from"@storybook/instrumenter";import{styled as I}from"@storybook/theming";import Bt from"react";import{CallStates as w}from"@storybook/instrumenter";import{styled as Pt,typography as Z}from"@storybook/theming";var $t=Pt.div(({theme:t,status:o})=>{let e={[w.DONE]:t.color.positive,[w.ERROR]:t.color.negative,[w.ACTIVE]:t.color.warning,[w.WAITING]:t.color.warning}[o];return{padding:"4px 6px 4px 8px;",borderRadius:"4px",backgroundColor:e,color:"white",fontFamily:Z.fonts.base,textTransform:"uppercase",fontSize:Z.size.s1,letterSpacing:3,fontWeight:Z.weight.bold,width:65,textAlign:"center"}}),it=({status:t})=>{let o={[w.DONE]:"Pass",[w.ERROR]:"Fail",[w.ACTIVE]:"Runs",[w.WAITING]:"Runs"}[t];return Bt.createElement($t,{status:t},o)};var Ht=I.div(({theme:t})=>({background:t.background.app,borderBottom:`1px solid ${t.appBorderColor}`,position:"sticky",top:0,zIndex:1})),Rt=I.nav(({theme:t})=>({height:40,display:"flex",alignItems:"center",justifyContent:"space-between",paddingLeft:15})),Gt=I(Dt)(({theme:t})=>({borderRadius:4,padding:6,color:t.textMutedColor,"&:not(:disabled)":{"&:hover,&:focus-visible":{color:t.color.secondary}}})),M=I(jt)(({theme:t})=>({fontFamily:t.typography.fonts.base})),F=I(Mt)(({theme:t})=>({color:t.textMutedColor,margin:"0 3px"})),Vt=I(Ft)({marginTop:0}),Jt=I(Lt)(({theme:t})=>({color:t.textMutedColor,justifyContent:"flex-end",textAlign:"right",whiteSpace:"nowrap",marginTop:"auto",marginBottom:1,paddingRight:15,fontSize:13})),ct=I.div({display:"flex",alignItems:"center"}),Xt=I(F)({marginLeft:9}),Yt=I(Gt)({marginLeft:9,marginRight:9,marginBottom:1,lineHeight:"12px"}),Zt=I(F)(({theme:t,animating:o,disabled:e})=>({opacity:e?.5:1,svg:{animation:o&&`${t.animation.rotate360} 200ms ease-out`}})),pt=({controls:t,controlStates:o,status:e,storyFileName:r,onScrollToEnd:a,isRerunAnimating:l,setIsRerunAnimating:s})=>{let p=e===zt.ERROR?"Scroll to error":"Scroll to end";return c.createElement(Ht,null,c.createElement(Wt,null,c.createElement(Rt,null,c.createElement(ct,null,c.createElement(it,{status:e}),c.createElement(Yt,{onClick:a,disabled:!a},p),c.createElement(Vt,null),c.createElement(D,{hasChrome:!1,tooltip:c.createElement(M,{note:"Go to start"})},c.createElement(Xt,{"aria-label":"Go to start",containsIcon:!0,onClick:t.start,disabled:!o.start},c.createElement($,{icon:"rewind"}))),c.createElement(D,{hasChrome:!1,tooltip:c.createElement(M,{note:"Go back"})},c.createElement(F,{"aria-label":"Go back",containsIcon:!0,onClick:t.back,disabled:!o.back},c.createElement($,{icon:"playback"}))),c.createElement(D,{hasChrome:!1,tooltip:c.createElement(M,{note:"Go forward"})},c.createElement(F,{"aria-label":"Go forward",containsIcon:!0,onClick:t.next,disabled:!o.next},c.createElement($,{icon:"playnext"}))),c.createElement(D,{hasChrome:!1,tooltip:c.createElement(M,{note:"Go to end"})},c.createElement(F,{"aria-label":"Go to end",containsIcon:!0,onClick:t.end,disabled:!o.end},c.createElement($,{icon:"fastforward"}))),c.createElement(D,{hasChrome:!1,tooltip:c.createElement(M,{note:"Rerun"})},c.createElement(Zt,{"aria-label":"Rerun",containsIcon:!0,onClick:t.rerun,onAnimationEnd:()=>s(!1),animating:l,disabled:l},c.createElement($,{icon:"sync"})))),r&&c.createElement(ct,null,c.createElement(Jt,null,r)))))};import*as m from"react";import{IconButton as vo,Icons as No,TooltipNote as Bo,WithTooltip as Po}from"@storybook/components";import{CallStates as O}from"@storybook/instrumenter";import{styled as T,typography as G}from"@storybook/theming";import{transparentize as $o}from"polished";import d from"react";import{styled as ft,typography as ho}from"@storybook/theming";import{ObjectInspector as Ut}from"@devtools-ds/object-inspector";import{useTheme as U}from"@storybook/theming";import n,{Fragment as qt}from"react";var Kt={base:"#444",nullish:"#7D99AA",string:"#16B242",number:"#5D40D0",boolean:"#f41840",objectkey:"#698394",instance:"#A15C20",function:"#EA7509",muted:"#7D99AA",tag:{name:"#6F2CAC",suffix:"#1F99E5"},date:"#459D9C",error:{name:"#D43900",message:"#444"},regex:{source:"#A15C20",flags:"#EA7509"},meta:"#EA7509",method:"#0271B6"},Qt={base:"#eee",nullish:"#aaa",string:"#5FE584",number:"#6ba5ff",boolean:"#ff4191",objectkey:"#accfe6",instance:"#E3B551",function:"#E3B551",muted:"#aaa",tag:{name:"#f57bff",suffix:"#8EB5FF"},date:"#70D4D3",error:{name:"#f40",message:"#eee"},regex:{source:"#FAD483",flags:"#E3B551"},meta:"#FAD483",method:"#5EC1FF"},f=()=>{let{base:t}=U();return t==="dark"?Qt:Kt},to=/[^A-Z0-9]/i,dt=/[\s.,â€¦]+$/gm,ut=(t,o)=>{if(t.length<=o)return t;for(let e=o-1;e>=0;e-=1)if(to.test(t[e])&&e>10)return`${t.slice(0,e).replace(dt,"")}\u2026`;return`${t.slice(0,o).replace(dt,"")}\u2026`},oo=t=>{try{return JSON.stringify(t,null,1)}catch{return String(t)}},gt=(t,o)=>t.flatMap((e,r)=>r===t.length-1?[e]:[e,n.cloneElement(o,{key:`sep${r}`})]),A=({value:t,nested:o,showObjectInspector:e,callsById:r,...a})=>{switch(!0){case t===null:return n.createElement(eo,{...a});case t===void 0:return n.createElement(no,{...a});case Array.isArray(t):return n.createElement(lo,{...a,value:t,callsById:r});case typeof t=="string":return n.createElement(ro,{...a,value:t});case typeof t=="number":return n.createElement(so,{...a,value:t});case typeof t=="boolean":return n.createElement(ao,{...a,value:t});case Object.prototype.hasOwnProperty.call(t,"__date__"):return n.createElement(go,{...a,...t.__date__});case Object.prototype.hasOwnProperty.call(t,"__error__"):return n.createElement(mo,{...a,...t.__error__});case Object.prototype.hasOwnProperty.call(t,"__regexp__"):return n.createElement(fo,{...a,...t.__regexp__});case Object.prototype.hasOwnProperty.call(t,"__function__"):return n.createElement(po,{...a,...t.__function__});case Object.prototype.hasOwnProperty.call(t,"__symbol__"):return n.createElement(yo,{...a,...t.__symbol__});case Object.prototype.hasOwnProperty.call(t,"__element__"):return n.createElement(uo,{...a,...t.__element__});case Object.prototype.hasOwnProperty.call(t,"__class__"):return n.createElement(co,{...a,...t.__class__});case Object.prototype.hasOwnProperty.call(t,"__callId__"):return n.createElement(H,{call:r.get(t.__callId__),callsById:r});case Object.prototype.toString.call(t)==="[object Object]":return n.createElement(io,{value:t,showInspector:e,...a});default:return n.createElement(bo,{value:t,...a})}},eo=t=>{let o=f();return n.createElement("span",{style:{color:o.nullish},...t},"null")},no=t=>{let o=f();return n.createElement("span",{style:{color:o.nullish},...t},"undefined")},ro=({value:t,...o})=>{let e=f();return n.createElement("span",{style:{color:e.string},...o},JSON.stringify(ut(t,50)))},so=({value:t,...o})=>{let e=f();return n.createElement("span",{style:{color:e.number},...o},t)},ao=({value:t,...o})=>{let e=f();return n.createElement("span",{style:{color:e.boolean},...o},String(t))},lo=({value:t,nested:o=!1,callsById:e})=>{let r=f();if(o)return n.createElement("span",{style:{color:r.base}},"[\u2026]");let a=t.slice(0,3).map(s=>n.createElement(A,{key:JSON.stringify(s),value:s,nested:!0,callsById:e})),l=gt(a,n.createElement("span",null,", "));return t.length<=3?n.createElement("span",{style:{color:r.base}},"[",l,"]"):n.createElement("span",{style:{color:r.base}},"(",t.length,") [",l,", \u2026]")},io=({showInspector:t,value:o,nested:e=!1})=>{let r=U().base==="dark",a=f();if(t)return n.createElement(n.Fragment,null,n.createElement(Ut,{id:"interactions-object-inspector",data:o,includePrototypes:!1,colorScheme:r?"dark":"light"}));if(e)return n.createElement("span",{style:{color:a.base}},"{\u2026}");let l=gt(Object.entries(o).slice(0,2).map(([s,p])=>n.createElement(qt,{key:s},n.createElement("span",{style:{color:a.objectkey}},s,": "),n.createElement(A,{value:p,nested:!0}))),n.createElement("span",null,", "));return Object.keys(o).length<=2?n.createElement("span",{style:{color:a.base}},"{ ",l," }"):n.createElement("span",{style:{color:a.base}},"(",Object.keys(o).length,") ","{ ",l,", \u2026 }")},co=({name:t})=>{let o=f();return n.createElement("span",{style:{color:o.instance}},t)},po=({name:t})=>{let o=f();return t?n.createElement("span",{style:{color:o.function}},t):n.createElement("span",{style:{color:o.nullish,fontStyle:"italic"}},"anonymous")},uo=({prefix:t,localName:o,id:e,classNames:r=[],innerText:a})=>{let l=t?`${t}:${o}`:o,s=f();return n.createElement("span",{style:{wordBreak:"keep-all"}},n.createElement("span",{key:`${l}_lt`,style:{color:s.muted}},"<"),n.createElement("span",{key:`${l}_tag`,style:{color:s.tag.name}},l),n.createElement("span",{key:`${l}_suffix`,style:{color:s.tag.suffix}},e?`#${e}`:r.reduce((p,g)=>`${p}.${g}`,"")),n.createElement("span",{key:`${l}_gt`,style:{color:s.muted}},">"),!e&&r.length===0&&a&&n.createElement(n.Fragment,null,n.createElement("span",{key:`${l}_text`},a),n.createElement("span",{key:`${l}_close_lt`,style:{color:s.muted}},"<"),n.createElement("span",{key:`${l}_close_tag`,style:{color:s.tag.name}},"/",l),n.createElement("span",{key:`${l}_close_gt`,style:{color:s.muted}},">")))},go=({value:t})=>{let[o,e,r]=t.split(/[T.Z]/),a=f();return n.createElement("span",{style:{whiteSpace:"nowrap",color:a.date}},o,n.createElement("span",{style:{opacity:.7}},"T"),e==="00:00:00"?n.createElement("span",{style:{opacity:.7}},e):e,r==="000"?n.createElement("span",{style:{opacity:.7}},".",r):`.${r}`,n.createElement("span",{style:{opacity:.7}},"Z"))},mo=({name:t,message:o})=>{let e=f();return n.createElement("span",{style:{color:e.error.name}},t,o&&": ",o&&n.createElement("span",{style:{color:e.error.message},title:o.length>50?o:""},ut(o,50)))},fo=({flags:t,source:o})=>{let e=f();return n.createElement("span",{style:{whiteSpace:"nowrap",color:e.regex.flags}},"/",n.createElement("span",{style:{color:e.regex.source}},o),"/",t)},yo=({description:t})=>{let o=f();return n.createElement("span",{style:{whiteSpace:"nowrap",color:o.instance}},"Symbol(",t&&n.createElement("span",{style:{color:o.meta}},'"',t,'"'),")")},bo=({value:t})=>{let o=f();return n.createElement("span",{style:{color:o.meta}},oo(t))},Co=({label:t})=>{let o=f(),{typography:e}=U();return n.createElement("span",{style:{color:o.base,fontFamily:e.fonts.base,fontSize:e.size.s2-1}},t)},H=({call:t,callsById:o})=>{if(!t)return null;if(t.method==="step"&&t.path.length===0)return n.createElement(Co,{label:t.args[0]});let e=t.path.flatMap((l,s)=>{let p=l.__callId__;return[p?n.createElement(H,{key:`elem${s}`,call:o.get(p),callsById:o}):n.createElement("span",{key:`elem${s}`},l),n.createElement("wbr",{key:`wbr${s}`}),n.createElement("span",{key:`dot${s}`},".")]}),r=t.args.flatMap((l,s,p)=>{let g=n.createElement(A,{key:`node${s}`,value:l,callsById:o});return s<p.length-1?[g,n.createElement("span",{key:`comma${s}`},",\xA0"),n.createElement("wbr",{key:`wbr${s}`})]:[g]}),a=f();return n.createElement(n.Fragment,null,n.createElement("span",{style:{color:a.base}},e),n.createElement("span",{style:{color:a.method}},t.method),n.createElement("span",{style:{color:a.base}},"(",n.createElement("wbr",null),r,n.createElement("wbr",null),")"))};var mt=(t,o=0)=>{for(let e=o,r=1;e<t.length;e+=1)if(t[e]==="("?r+=1:t[e]===")"&&(r-=1),r===0)return t.slice(o,e);return""},q=t=>{try{return t==="undefined"?void 0:JSON.parse(t)}catch{return t}},So=ft.span(({theme:t})=>({color:t.base==="light"?t.color.positiveText:t.color.positive})),Io=ft.span(({theme:t})=>({color:t.base==="light"?t.color.negativeText:t.color.negative})),K=({value:t,parsed:o})=>o?d.createElement(A,{showObjectInspector:!0,value:t,style:{color:"#D43900"}}):d.createElement(Io,null,t),Q=({value:t,parsed:o})=>o?typeof t=="string"&&t.startsWith("called with")?d.createElement(d.Fragment,null,t):d.createElement(A,{showObjectInspector:!0,value:t,style:{color:"#16B242"}}):d.createElement(So,null,t),yt=({message:t})=>{let o=t.split(`
`);return d.createElement("pre",{style:{margin:0,padding:"8px 10px 8px 36px",fontSize:ho.size.s1}},o.flatMap((e,r)=>{if(e.startsWith("expect(")){let y=mt(e,7),C=y&&7+y.length,h=y&&e.slice(C).match(/\.(to|last|nth)[A-Z]\w+\(/);if(h){let _=C+h.index+h[0].length,E=mt(e,_);if(E)return["expect(",d.createElement(K,{key:`received_${y}`,value:y}),e.slice(C,_),d.createElement(Q,{key:`expected_${E}`,value:E}),e.slice(_+E.length),d.createElement("br",{key:`br${r}`})]}}if(e.match(/^\s*- /))return[d.createElement(Q,{key:e+r,value:e}),d.createElement("br",{key:`br${r}`})];if(e.match(/^\s*\+ /))return[d.createElement(K,{key:e+r,value:e}),d.createElement("br",{key:`br${r}`})];let[,a,l]=e.match(/^(Expected|Received): (.*)$/)||[];if(a&&l)return a==="Expected"?["Expected: ",d.createElement(Q,{key:e+r,value:q(l),parsed:!0}),d.createElement("br",{key:`br${r}`})]:["Received: ",d.createElement(K,{key:e+r,value:q(l),parsed:!0}),d.createElement("br",{key:`br${r}`})];let[,s,p]=e.match(/(Expected number|Received number|Number) of calls: (\d+)$/i)||[];if(s&&p)return[`${s} of calls: `,d.createElement(A,{key:e+r,value:Number(p)}),d.createElement("br",{key:`br${r}`})];let[,g]=e.match(/^Received has value: (.+)$/)||[];return g?["Received has value: ",d.createElement(A,{key:e+r,value:q(g)}),d.createElement("br",{key:`br${r}`})]:[d.createElement("span",{key:e+r},e),d.createElement("br",{key:`br${r}`})]}))};import _o from"react";import{Icons as ko}from"@storybook/components";import{CallStates as x}from"@storybook/instrumenter";import{styled as wo}from"@storybook/theming";import{transparentize as Ao}from"polished";var xo={pure:{gray:{500:"#CCCCCC"}}},Eo={colors:xo},bt=Eo;var{colors:{pure:{gray:To}}}=bt,Oo=wo(ko)(({theme:t,status:o})=>{let e={[x.DONE]:t.color.positive,[x.ERROR]:t.color.negative,[x.ACTIVE]:t.color.secondary,[x.WAITING]:Ao(.5,To[500])}[o];return{width:o===x.WAITING?6:12,height:o===x.WAITING?6:12,color:e,justifySelf:"center"}}),R=({status:t,className:o})=>{let e={[x.DONE]:"check",[x.ERROR]:"stopalt",[x.ACTIVE]:"play",[x.WAITING]:"circle"}[t];return _o.createElement(Oo,{"data-testid":`icon-${t}`,status:t,icon:e,className:o})};var Do=T.div(()=>({fontFamily:G.fonts.mono,fontSize:G.size.s1,overflowWrap:"break-word",inlineSize:"calc( 100% - 40px )"})),Mo=T("div",{shouldForwardProp:t=>!["call","pausedAt"].includes(t.toString())})(({theme:t,call:o})=>({position:"relative",display:"flex",flexDirection:"column",borderBottom:`1px solid ${t.appBorderColor}`,fontFamily:G.fonts.base,fontSize:13,...o.status===O.ERROR&&{backgroundColor:t.base==="dark"?$o(.93,t.color.negative):t.background.warning},paddingLeft:o.ancestors.length*20}),({theme:t,call:o,pausedAt:e})=>e===o.id&&{"&::before":{content:'""',position:"absolute",top:-5,zIndex:1,borderTop:"4.5px solid transparent",borderLeft:`7px solid ${t.color.warning}`,borderBottom:"4.5px solid transparent"},"&::after":{content:'""',position:"absolute",top:-1,zIndex:1,width:"100%",borderTop:`1.5px solid ${t.color.warning}`}}),Fo=T.div(({theme:t,isInteractive:o})=>({display:"flex","&:hover":o?{}:{background:t.background.hoverable}})),Lo=T("button",{shouldForwardProp:t=>!["call"].includes(t.toString())})(({theme:t,disabled:o,call:e})=>({flex:1,display:"grid",background:"none",border:0,gridTemplateColumns:"15px 1fr",alignItems:"center",minHeight:40,margin:0,padding:"8px 15px",textAlign:"start",cursor:o||e.status===O.ERROR?"default":"pointer","&:focus-visible":{outline:0,boxShadow:`inset 3px 0 0 0 ${e.status===O.ERROR?t.color.warning:t.color.secondary}`,background:e.status===O.ERROR?"transparent":t.background.hoverable},"& > div":{opacity:e.status===O.WAITING?.5:1}})),jo=T.div({padding:6}),Wo=T(vo)(({theme:t})=>({color:t.textMutedColor,margin:"0 3px"})),zo=T(Bo)(({theme:t})=>({fontFamily:t.typography.fonts.base})),Ho=T("div")(({theme:t})=>({padding:"8px 10px 8px 36px",fontSize:G.size.s1,color:t.color.defaultText,pre:{margin:0,padding:0}})),Ro=({exception:t})=>{if(t.message.startsWith("expect("))return m.createElement(yt,{...t});let o=t.message.split(`

`),e=o.length>1;return m.createElement(Ho,null,m.createElement("pre",null,o[0]),e&&m.createElement("p",null,"See the full stack trace in the browser console."))},Ct=({call:t,callsById:o,controls:e,controlStates:r,childCallIds:a,isHidden:l,isCollapsed:s,toggleCollapsed:p,pausedAt:g})=>{let[y,C]=m.useState(!1),h=!r.goto||!t.interceptable||!!t.ancestors.length;return l?null:m.createElement(Mo,{call:t,pausedAt:g},m.createElement(Fo,{isInteractive:h},m.createElement(Lo,{call:t,onClick:()=>e.goto(t.id),disabled:h,onMouseEnter:()=>r.goto&&C(!0),onMouseLeave:()=>r.goto&&C(!1)},m.createElement(R,{status:y?O.ACTIVE:t.status}),m.createElement(Do,{style:{marginLeft:6,marginBottom:1}},m.createElement(H,{call:t,callsById:o}))),m.createElement(jo,null,a?.length>0&&m.createElement(Po,{hasChrome:!1,tooltip:m.createElement(zo,{note:`${s?"Show":"Hide"} interactions`})},m.createElement(Wo,{containsIcon:!0,onClick:p},m.createElement(No,{icon:"listunordered"}))))),t.status===O.ERROR&&t.exception?.callId===t.id&&m.createElement(Ro,{exception:t.exception}))};var Yo=B.div(({theme:t,withException:o})=>({minHeight:"100%",background:t.background.content,...o&&{backgroundColor:t.base==="dark"?Xo(.93,t.color.negative):t.background.warning}})),Zo=B.div(({theme:t})=>({padding:15,fontSize:t.typography.size.s2-1,lineHeight:"19px"})),Uo=B.code(({theme:t})=>({margin:"0 1px",padding:3,fontSize:t.typography.size.s1-1,lineHeight:1,verticalAlign:"top",background:"rgba(0, 0, 0, 0.05)",border:`1px solid ${t.appBorderColor}`,borderRadius:3})),qo=B.div({paddingBottom:4,fontWeight:"bold"}),Ko=B.p({margin:0,padding:"0 0 20px"}),Qo=B.pre(({theme:t})=>({margin:0,padding:0,fontSize:t.typography.size.s1-1})),ht=b.memo(({calls:t,controls:o,controlStates:e,interactions:r,fileName:a,hasException:l,caughtException:s,isPlaying:p,pausedAt:g,onScrollToEnd:y,endRef:C,isRerunAnimating:h,setIsRerunAnimating:_,...E})=>b.createElement(Go,{...E},b.createElement(Yo,{withException:!!s},e.debugger&&(r.length>0||l||h)&&b.createElement(pt,{controls:o,controlStates:e,status:p?tt.ACTIVE:l?tt.ERROR:tt.DONE,storyFileName:a,onScrollToEnd:y,isRerunAnimating:h,setIsRerunAnimating:_}),b.createElement("div",null,r.map(k=>b.createElement(Ct,{key:k.id,call:k,callsById:t,controls:o,controlStates:e,childCallIds:k.childCallIds,isHidden:k.isHidden,isCollapsed:k.isCollapsed,toggleCollapsed:k.toggleCollapsed,pausedAt:g}))),s&&!s.message?.startsWith("ignoredException")&&b.createElement(Zo,null,b.createElement(qo,null,"Caught exception in ",b.createElement(Uo,null,"play")," function"),b.createElement(Ko,null,"This story threw an error after it finished rendering which means your interactions couldn't be run. Go to this story's play function in ",a," to fix."),b.createElement(Qo,{"data-chromatic":"ignore"},s.stack||`${s.name}: ${s.message}`)),b.createElement("div",{ref:C}),!p&&!s&&r.length===0&&b.createElement(Jo,null,"No interactions found",b.createElement(Vo,{href:"https://storybook.js.org/docs/react/writing-stories/play-function",target:"_blank",withArrow:!0},"Learn how to add interactions to your story")))));import{styled as te}from"@storybook/theming";import oe from"react-dom";var St=({children:t})=>{let o=window.document.getElementById("tabbutton-interactions");return o&&oe.createPortal(t,o)},It=te(R)({marginLeft:5});var ce={debugger:!1,start:!1,back:!1,goto:!1,next:!1,end:!1},xt=({log:t,calls:o,collapsed:e,setCollapsed:r})=>{let a=new Map,l=new Map;return t.map(({callId:s,ancestors:p,status:g})=>{let y=!1;return p.forEach(C=>{e.has(C)&&(y=!0),l.set(C,(l.get(C)||[]).concat(s))}),{...o.get(s),status:g,isHidden:y}}).map(s=>{let p=s.status===L.ERROR&&a.get(s.ancestors.slice(-1)[0])?.status===L.ACTIVE?L.ACTIVE:s.status;return a.set(s.id,{...s,status:p}),{...s,status:p,childCallIds:l.get(s.id),isCollapsed:e.has(s.id),toggleCollapsed:()=>r(g=>(g.has(s.id)?g.delete(s.id):g.add(s.id),new Set(g)))}})},Et=t=>{let[o,e]=i.useState(),[r,a]=i.useState(ce),[l,s]=i.useState(),[p,g]=i.useState(!1),[y,C]=i.useState(!1),[h,_]=i.useState(!1),[E,k]=i.useState(),[j,et]=i.useState(new Set),[V,J]=i.useState(),[W,nt]=i.useState([]),[rt,kt]=i.useState(),st=i.useRef([]),z=i.useRef(new Map),wt=({status:u,...P})=>z.current.set(P.id,P),X=i.useRef();i.useEffect(()=>{let u;return ot.window.IntersectionObserver&&(u=new ot.window.IntersectionObserver(([P])=>k(P.isIntersecting?void 0:P.target),{root:ot.window.document.querySelector("#panel-tab-content")}),X.current&&u.observe(X.current)),()=>u?.disconnect()},[]);let N=ee({[v.CALL]:wt,[v.SYNC]:u=>{a(u.controlStates),s(u.pausedAt),nt(xt({log:u.logItems,calls:z.current,collapsed:j,setCollapsed:et})),st.current=u.logItems},[ae]:u=>{e(u.storyId),C(u.newPhase==="playing"),s(void 0),u.newPhase==="rendering"&&(g(!1),J(void 0))},[le]:()=>{g(!0)},[ie]:u=>{u?.message!==se.message?J(u):J(void 0)}},[j]);i.useEffect(()=>{nt(xt({log:st.current,calls:z.current,collapsed:j,setCollapsed:et}))},[j]),i.useEffect(()=>{y||h||kt(W.filter(({method:u})=>u!=="step").length)},[W,y,h]);let At=i.useMemo(()=>({start:()=>N(v.START,{storyId:o}),back:()=>N(v.BACK,{storyId:o}),goto:u=>N(v.GOTO,{storyId:o,callId:u}),next:()=>N(v.NEXT,{storyId:o}),end:()=>N(v.END,{storyId:o}),rerun:()=>{_(!0),N(re,{storyId:o})}}),[o]),Tt=ne("fileName",""),[Ot]=Tt.toString().split("/").slice(-1),vt=()=>E?.scrollIntoView({behavior:"smooth",block:"end"}),Nt=rt>0||!!V||h,at=!!V||W.some(u=>u.status===L.ERROR);return p?i.createElement(i.Fragment,{key:"interactions"}):i.createElement(i.Fragment,{key:"interactions"},i.createElement(St,null,Nt&&(at?i.createElement(It,{status:L.ERROR}):` (${rt})`)),i.createElement(ht,{calls:z.current,controls:At,controlStates:r,interactions:W,fileName:Ot,hasException:at,caughtException:V,isPlaying:y,pausedAt:l,endRef:X,onScrollToEnd:E&&vt,isRerunAnimating:h,setIsRerunAnimating:_,...t}))};_t.register(Y,()=>{_t.add(lt,{type:pe.PANEL,title:"Interactions",match:({viewMode:t})=>t==="story",render:Et})});
